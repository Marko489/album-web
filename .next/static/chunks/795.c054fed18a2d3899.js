"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[795],{8795:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var o=a(5155),r=a(9137),i=a.n(r),n=a(2115),d=a(6766);let l=e=>{let{album_id:t,onClose:a,onPhotoAdded:r}=e,[l,s]=(0,n.useState)(null),[c,b]=(0,n.useState)(null),[f,x]=(0,n.useState)(""),[p,m]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),g=(0,n.useRef)(null),[w,k]=(0,n.useState)({w:4,h:3});n.useEffect(()=>{if(!c)return;let e=new window.Image;e.onload=()=>k({w:e.naturalWidth,h:e.naturalHeight}),e.src=c},[c]);let j=e=>{var t;let a=(null==(t=e.target.files)?void 0:t[0])||null;if(s(a),h(null),a){let e=new FileReader;e.onload=e=>{var t;return b(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(a)}else b(null)},y=async()=>{if(!l)return void h("Please select a photo.");m(!0),h(null);try{let e=new FormData;e.append("album_id",t),e.append("photo",l),e.append("description",f);let o=await fetch("/api/add_photo",{method:"POST",body:e});if(!o.ok){let e=await o.json();throw Error(e.error||"Failed to add photo")}s(null),b(null),x(""),null==r||r(),a()}catch(e){e instanceof Error?h(e.message):h("Failed to add photo")}finally{m(!1)}},v=1;{let e=Math.max(.05*window.innerWidth,32);v=Math.max(1,Math.min(1.5,(window.innerWidth-2*e)/600))}let z="".concat(1.3*v,"rem"),N="".concat(+v,"rem"),S="".concat(+v,"rem"),C="".concat(1.1*v,"rem");return(0,o.jsxs)("div",{onClick:a,className:"jsx-aeff515be057d8e5 addphoto-overlay",children:[(()=>{let e=Math.max(.05*window.innerWidth,32),t=Math.max(.05*window.innerHeight,32),r=window.innerWidth-2*e,i=window.innerHeight-2*t,n=c?w.w/w.h:4/3,l=r-36,s=i-248,b=l,m=l/n;m>s&&(m=s,b=s*n);let h=b+36,k=m+248;return(0,o.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{background:"#23232b",borderRadius:18,padding:"".concat(22,"px ").concat(18,"px"),boxShadow:"0 8px 40px 0 rgba(0,0,0,0.55), 0 1.5px 8px 0 rgba(0,0,0,0.22)",maxWidth:h,maxHeight:k,width:h,height:k,display:"flex",flexDirection:"column",alignItems:"center",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2100},className:"jsx-aeff515be057d8e5 addphoto-modal",children:[(0,o.jsx)("button",{onClick:a,"aria-label":"Close",className:"jsx-aeff515be057d8e5 close-btn",children:"\xd7"}),(0,o.jsx)("h2",{style:{marginTop:0,marginBottom:16,fontSize:z,color:"#f4f4f4"},className:"jsx-aeff515be057d8e5",children:"Add Photo"}),(0,o.jsx)("input",{type:"file",accept:"image/*",ref:g,onChange:j,style:{display:"none"},className:"jsx-aeff515be057d8e5"}),(0,o.jsx)("div",{onClick:()=>{var e;return null==(e=g.current)?void 0:e.click()},style:{width:"100%",height:m,marginBottom:16},className:"jsx-aeff515be057d8e5 preview-container",children:c?(0,o.jsx)(d.default,{src:c,alt:"Preview",width:b,height:m,style:{width:b,height:m,maxWidth:"100%",maxHeight:"100%",borderRadius:"12px",display:"block",objectFit:"contain",background:"#181818"},sizes:"100vw"}):(0,o.jsx)("div",{style:{height:m,lineHeight:"".concat(m,"px"),fontSize:C,background:"#181818",color:"#f4f4f4"},className:"jsx-aeff515be057d8e5 preview-placeholder",children:"Click to select a photo"})}),(0,o.jsx)("textarea",{placeholder:"Add a description (optional)",value:f,onChange:e=>x(e.target.value),rows:3,style:{marginBottom:16,fontSize:N,color:"#f4f4f4",background:"#23232b",border:"1px solid #39394a"},className:"jsx-aeff515be057d8e5 desc-input"}),(0,o.jsxs)("div",{className:"jsx-aeff515be057d8e5 footer",children:[(0,o.jsx)("button",{onClick:y,disabled:p,style:{fontSize:S,background:"#d7263d",color:"#fff"},className:"jsx-aeff515be057d8e5 add-btn",children:p?"Adding...":"Add"}),u&&(0,o.jsx)("div",{className:"jsx-aeff515be057d8e5 error",children:u})]})]})})(),(0,o.jsx)(i(),{id:"aeff515be057d8e5",children:".addphoto-overlay.jsx-aeff515be057d8e5{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.72);z-index:2000;-webkit-backdrop-filter:blur(2.5px);backdrop-filter:blur(2.5px)}.close-btn.jsx-aeff515be057d8e5{position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:2rem;color:#888;cursor:pointer;z-index:1;-webkit-transition:color.2s;-moz-transition:color.2s;-o-transition:color.2s;transition:color.2s}.close-btn.jsx-aeff515be057d8e5:hover{color:#222}.preview-container.jsx-aeff515be057d8e5{width:100%;min-height:180px;background:#f3f3f3;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;margin-bottom:1rem;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;overflow:hidden}.preview-img.jsx-aeff515be057d8e5{max-width:100%;max-height:220px;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;display:block}.preview-placeholder.jsx-aeff515be057d8e5{color:#aaa;font-size:1.1rem;text-align:center;padding:2rem 0;width:100%}.desc-input.jsx-aeff515be057d8e5{width:100%;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;border:1px solid#ddd;padding:.5rem;margin-bottom:1rem;font-size:1rem;resize:vertical}.footer.jsx-aeff515be057d8e5{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;gap:1rem}.add-btn.jsx-aeff515be057d8e5{background:#222;color:#fff;border:none;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:.5rem 1.5rem;font-size:1rem;cursor:pointer;-webkit-transition:background.2s;-moz-transition:background.2s;-o-transition:background.2s;transition:background.2s}.add-btn.jsx-aeff515be057d8e5:disabled{background:#888;cursor:not-allowed}.error.jsx-aeff515be057d8e5{color:#c00;font-size:.95rem;margin-left:1rem}"})]})}}}]);