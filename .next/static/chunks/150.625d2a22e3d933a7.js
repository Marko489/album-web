"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[150],{1150:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var n=i(5155),o=i(9137),a=i.n(o),r=i(2115),l=i(6766);let d=e=>{let{photo:t,onClose:i,onPhotoDeleted:o}=e,[d,s]=r.useState(!1),[c,b]=r.useState(null),[h,x]=r.useState(2),[p,f]=r.useState({w:4,h:3});r.useEffect(()=>{function e(){{let e=Math.min(window.innerWidth,1500);e<=600&&window.innerHeight>window.innerWidth?x(2):x(Math.max(2,Math.ceil(e/450)))}}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),r.useEffect(()=>{if(!(null==t?void 0:t.blob_url))return;let e=new window.Image;e.onload=()=>f({w:e.naturalWidth,h:e.naturalHeight}),e.src=t.blob_url},[null==t?void 0:t.blob_url]);let u=0,m=0,g=6,w=8,j=5,k=0,y=0,v=28,N=20,W=.82,S=2,z=8,E=6,C=.92,H=10;{let e=Math.max(.05*window.innerWidth,32),t=Math.max(.05*window.innerHeight,32),i=window.innerWidth-2*e,n=window.innerHeight-2*t;window.innerWidth<=600&&window.innerHeight>window.innerWidth?(g=8,w=14,j=5,v=24,N=22,W=.74,S=1,z=7,E=4,C=.82,H=7):(g=16+2.2*h,w=18+2.2*h,j=5+.5*h,v=18+1.2*h,N=18+2.2*h,W=.68+.06*h,S=1+.5*h,z=6+.7*h,E=4+.5*h,C=.78+.06*h,H=7+.7*h);let o=v+H+2*w+40,a=2*g,r=i-a,l=n-o,d=p.w/p.h,s=r,c=r/d;c>l&&(c=l,s=l*d),k=s,y=c,u=s+a,m=c+o}let _=async()=>{if(t.id){s(!0),b(null);try{let e=await fetch("/api/delete_photo",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id})});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to delete photo")}i(),null==o||o()}catch(e){e instanceof Error?b(e.message):b("Failed to delete photo")}finally{s(!1)}}};return(0,n.jsx)("div",{className:"lookup-overlay",onClick:i,children:(0,n.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{background:"#23232b",borderRadius:j,padding:"".concat(w,"px ").concat(g,"px"),boxShadow:"0 8px 40px 0 rgba(0,0,0,0.55), 0 1.5px 8px 0 rgba(0,0,0,0.22)",maxWidth:u,maxHeight:m,width:"auto",height:"auto",display:"flex",flexDirection:"column",alignItems:"stretch",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2100},className:"jsx-11479aec09b9a2bf lookup-modal",children:[(0,n.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",height:v,marginBottom:8},className:"jsx-11479aec09b9a2bf",children:[(0,n.jsx)("button",{onClick:_,disabled:d,"aria-label":"Delete Photo",style:{background:"#d7263d",color:"#fff",border:"none",borderRadius:E,padding:"".concat(S,"px ").concat(z,"px"),fontSize:"".concat(W,"rem"),cursor:"pointer",boxShadow:"0 2px 8px rgba(215,38,61,0.10)",transition:"background 0.2s",zIndex:2,minWidth:0,minHeight:0,fontWeight:600,letterSpacing:"0.01em",display:"inline-block",opacity:d?.7:1},className:"jsx-11479aec09b9a2bf delete-btn",children:d?"...":"Delete"}),(0,n.jsx)("button",{onClick:i,"aria-label":"Close",style:{background:"none",border:"none",fontSize:N,color:"#888",cursor:"pointer",zIndex:1,transition:"color 0.2s",lineHeight:1,marginLeft:8},className:"jsx-11479aec09b9a2bf close-btn",children:"\xd7"})]}),(0,n.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:0,minWidth:0},className:"jsx-11479aec09b9a2bf",children:(0,n.jsx)(l.default,{src:t.blob_url,alt:t.description||"Album photo",width:k,height:y,style:{width:k,height:y,maxWidth:k,maxHeight:y,borderRadius:j-1,boxShadow:"0 2px 8px rgba(0,0,0,0.22)",background:"#181818",objectFit:"contain",display:"block"},sizes:"(max-width: 900px) 90vw, 700px",priority:!0})}),(0,n.jsx)("div",{style:{fontSize:"".concat(C,"rem"),color:"#f4f4f4",textAlign:"left",marginTop:H,marginBottom:0,wordBreak:"break-word",maxWidth:"100%",paddingLeft:2,paddingRight:2},className:"jsx-11479aec09b9a2bf lookup-description",children:t.description||(0,n.jsx)("em",{className:"jsx-11479aec09b9a2bf",children:"No description"})}),c&&(0,n.jsx)("div",{className:"jsx-11479aec09b9a2bf delete-error",children:c}),(0,n.jsx)(a(),{id:"11479aec09b9a2bf",children:".lookup-overlay.jsx-11479aec09b9a2bf{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.72);z-index:2000;-webkit-backdrop-filter:blur(2.5px);backdrop-filter:blur(2.5px)}.close-btn.jsx-11479aec09b9a2bf:hover{color:#222}.delete-btn.jsx-11479aec09b9a2bf:disabled{background:#b71c1c;cursor:not-allowed}.delete-btn.jsx-11479aec09b9a2bf:hover:not(:disabled){background:#b71c1c}.delete-error.jsx-11479aec09b9a2bf{color:#e53935;font-size:1rem;margin-top:1rem;margin-bottom:.5rem;text-align:center}"})]})})}}}]);