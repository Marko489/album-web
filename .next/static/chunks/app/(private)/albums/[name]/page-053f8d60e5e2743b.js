(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{4796:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>w});var i=n(5155),o=n(2115),a=n(5028),r=n(9137),d=n.n(r),s=n(6766);let l=e=>{let{photos:t,onPhotoClick:n}=e,[a,r]=(0,o.useState)(2);return(0,o.useEffect)(()=>{function e(){window.innerWidth<=600&&window.innerHeight>window.innerWidth?r(2):r(Math.max(2,Math.ceil(window.innerWidth/450)))}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.jsxs)("div",{style:{columnCount:a,columnGap:"10px",marginLeft:"2vw",marginRight:"2vw"},className:"jsx-8d9e9e82e5af0adc masonry-grid",children:[t.map(e=>(0,i.jsxs)("div",{onClick:()=>null==n?void 0:n(e),style:{cursor:n?"pointer":"default",position:"relative",borderRadius:"12px",overflow:"hidden"},className:"jsx-8d9e9e82e5af0adc masonry-item",children:[(0,i.jsx)(s.default,{src:e.blob_url,alt:e.description||"Album photo",width:300,height:225,style:{width:"100%",height:"auto",borderRadius:"12px",marginBottom:"0px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",background:"#f3f3f3",objectFit:"cover",display:"block"},sizes:"(max-width: 600px) 48vw, 300px",priority:!1}),(0,i.jsx)("div",{className:"jsx-8d9e9e82e5af0adc masonry-overlay"})]},e.id)),(0,i.jsx)(d(),{id:"8d9e9e82e5af0adc",children:".masonry-grid.jsx-8d9e9e82e5af0adc{}.masonry-item.jsx-8d9e9e82e5af0adc{-webkit-column-break-inside:avoid;page-break-inside:avoid;break-inside:avoid;margin-bottom:16px}.masonry-overlay.jsx-8d9e9e82e5af0adc{pointer-events:none;position:absolute;top:0;left:0;right:0;bottom:0;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;background:rgba(32,32,32,0);-webkit-transition:background.18s;-moz-transition:background.18s;-o-transition:background.18s;transition:background.18s}.masonry-item.jsx-8d9e9e82e5af0adc:hover .masonry-overlay.jsx-8d9e9e82e5af0adc,.masonry-item.jsx-8d9e9e82e5af0adc:active .masonry-overlay.jsx-8d9e9e82e5af0adc{background:rgba(32,32,32,.28)}"})]})},c=(0,a.default)(()=>n.e(150).then(n.bind(n,1150)),{loadableGenerated:{webpack:()=>[1150]},ssr:!1}),h=(0,a.default)(()=>n.e(795).then(n.bind(n,8795)),{loadableGenerated:{webpack:()=>[8795]},ssr:!1});async function u(){let e=await fetch("/api/albums_page",{cache:"no-store"});if(!e.ok)throw Error("Failed to fetch album data");return e.json()}async function f(e){let t=await fetch("/api/fetch_photos?album_id=".concat(e),{cache:"no-store"});if(!t.ok)throw Error("Failed to fetch photos");return t.json()}function w(){return(0,i.jsx)(m,{})}function m(){let[e,t]=(0,o.useState)([]),[n,a]=(0,o.useState)(""),[r,d]=(0,o.useState)(""),[s,w]=(0,o.useState)(null),[m,x]=(0,o.useState)(!1),[b,p]=(0,o.useState)(!0),[g,y]=(0,o.useState)(window.innerWidth);o.useEffect(()=>{function e(){y(window.innerWidth)}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),o.useEffect(()=>{!async function(){p(!0);try{let{album_id:e,album_name:n}=await u();d(e),a(n);let{photos:i}=await f(e);t(i)}catch(e){}finally{p(!1)}}()},[]);let v=async()=>{if(r){p(!0);try{let{photos:e}=await f(r);t(e)}finally{p(!1)}}},j="1.5rem",k=32,S=18,E=12,_=24,z=16;{let e=Math.min(window.innerWidth,1500),t=2;t=e<=600&&window.innerHeight>window.innerWidth?2:Math.max(2,Math.ceil(e/300)),e<=600&&window.innerHeight>window.innerWidth?(j="1.5rem",k=32,S=18,E=10,_=18,z=10):(j="".concat(.9+.45*t,"rem"),S=Math.round(.55*(k=20+7*t)),E=6+6*t,_=16+8*t,z=8+6*t)}return(0,i.jsxs)("main",{style:{background:"#181818",minHeight:"100vh",width:"100vw",color:"#f4f4f4",position:"fixed",top:0,left:0,right:0,bottom:0,overflowY:"auto"},children:[(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",margin:"".concat(_,"px 0 ").concat(z,"px 0")},children:[(0,i.jsx)("h1",{style:{textAlign:"center",margin:0,fontSize:j,fontWeight:800,letterSpacing:"-1px",lineHeight:1.1,color:"#f4f4f4",textShadow:"0 2px 12px rgba(0,0,0,0.32)",transition:"font-size 0.2s"},children:n}),(0,i.jsx)("button",{className:"add-photo-btn","aria-label":"Add Photo",style:{width:k,height:k,borderRadius:12,background:"#d7263d",color:"#fff",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(215,38,61,0.18)",marginTop:E,marginBottom:8,transition:"background 0.2s, width 0.2s, height 0.2s",padding:0},onClick:()=>x(!0),children:(0,i.jsx)("span",{style:{fontSize:S,lineHeight:1,fontWeight:700,display:"block",width:"100%",textAlign:"center"},children:"+"})})]}),b?(0,i.jsx)("div",{style:{textAlign:"center",marginTop:"2rem",color:"#f4f4f4"},children:"Loading..."}):(0,i.jsx)(l,{photos:e,onPhotoClick:w}),s&&(0,i.jsx)(c,{photo:s,onClose:()=>w(null),onPhotoDeleted:v}),m&&(0,i.jsx)(h,{album_id:r,onClose:()=>x(!1),onPhotoAdded:v})]})}},9464:(e,t,n)=>{Promise.resolve().then(n.bind(n,4796))}},e=>{var t=t=>e(e.s=t);e.O(0,[530,441,684,977],()=>t(9464)),_N_E=e.O()}]);