"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[795],{8795:(e,r,a)=>{a.r(r),a.d(r,{default:()=>n});var t=a(5155),o=a(9137),d=a.n(o),i=a(2115),s=a(6766);let n=e=>{let{album_id:r,onClose:a,onPhotoAdded:o}=e,[n,l]=(0,i.useState)(null),[c,b]=(0,i.useState)(null),[x,p]=(0,i.useState)(""),[m,u]=(0,i.useState)(!1),[f,k]=(0,i.useState)(null),g=(0,i.useRef)(null),w=async()=>{if(!n)return void k("Please select a photo.");u(!0),k(null);try{let e=new FormData;e.append("album_id",r),e.append("photo",n),e.append("description",x);let t=await fetch("/api/add_photo",{method:"POST",body:e});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to add photo")}l(null),b(null),p(""),null==o||o(),a()}catch(e){e instanceof Error?k(e.message):k("Failed to add photo")}finally{u(!1)}};return(0,t.jsx)("div",{className:"addphoto-overlay",onClick:a,children:(0,t.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-4406bd1dc0acd5e1 addphoto-modal",children:[(0,t.jsx)("button",{onClick:a,"aria-label":"Close",className:"jsx-4406bd1dc0acd5e1 close-btn",children:"\xd7"}),(0,t.jsx)("h2",{className:"jsx-4406bd1dc0acd5e1",children:"Add Photo"}),(0,t.jsx)("input",{type:"file",accept:"image/*",ref:g,onChange:e=>{var r;let a=(null==(r=e.target.files)?void 0:r[0])||null;if(l(a),k(null),a){let e=new FileReader;e.onload=e=>{var r;return b(null==(r=e.target)?void 0:r.result)},e.readAsDataURL(a)}else b(null)},style:{display:"none"},className:"jsx-4406bd1dc0acd5e1"}),(0,t.jsx)("div",{onClick:()=>{var e;return null==(e=g.current)?void 0:e.click()},className:"jsx-4406bd1dc0acd5e1 preview-container",children:c?(0,t.jsx)(s.default,{src:c,alt:"Preview",width:400,height:300,style:{maxWidth:"100%",maxHeight:"220px",borderRadius:"12px",display:"block",objectFit:"contain",background:"#f3f3f3"},sizes:"100vw"}):(0,t.jsx)("div",{className:"jsx-4406bd1dc0acd5e1 preview-placeholder",children:"Click to select a photo"})}),(0,t.jsx)("textarea",{placeholder:"Add a description (optional)",value:x,onChange:e=>p(e.target.value),rows:3,className:"jsx-4406bd1dc0acd5e1 desc-input"}),(0,t.jsxs)("div",{className:"jsx-4406bd1dc0acd5e1 footer",children:[(0,t.jsx)("button",{onClick:w,disabled:m,className:"jsx-4406bd1dc0acd5e1 add-btn",children:m?"Adding...":"Add"}),f&&(0,t.jsx)("div",{className:"jsx-4406bd1dc0acd5e1 error",children:f})]}),(0,t.jsx)(d(),{id:"4406bd1dc0acd5e1",children:".addphoto-overlay.jsx-4406bd1dc0acd5e1{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.72);z-index:2000;-webkit-backdrop-filter:blur(2.5px);backdrop-filter:blur(2.5px)}.addphoto-modal.jsx-4406bd1dc0acd5e1{background:#fff;-webkit-border-radius:18px;-moz-border-radius:18px;border-radius:18px;padding:2rem 2rem 1.5rem 2rem;-webkit-box-shadow:0 8px 40px 0 rgba(0,0,0,.28),0 1.5px 8px 0 rgba(0,0,0,.1);-moz-box-shadow:0 8px 40px 0 rgba(0,0,0,.28),0 1.5px 8px 0 rgba(0,0,0,.1);box-shadow:0 8px 40px 0 rgba(0,0,0,.28),0 1.5px 8px 0 rgba(0,0,0,.1);max-width:95vw;width:400px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:2100}.close-btn.jsx-4406bd1dc0acd5e1{position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:2rem;color:#888;cursor:pointer;z-index:1;-webkit-transition:color.2s;-moz-transition:color.2s;-o-transition:color.2s;transition:color.2s}.close-btn.jsx-4406bd1dc0acd5e1:hover{color:#222}.preview-container.jsx-4406bd1dc0acd5e1{width:100%;min-height:180px;background:#f3f3f3;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;margin-bottom:1rem;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;overflow:hidden}.preview-img.jsx-4406bd1dc0acd5e1{max-width:100%;max-height:220px;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;display:block}.preview-placeholder.jsx-4406bd1dc0acd5e1{color:#aaa;font-size:1.1rem;text-align:center;padding:2rem 0;width:100%}.desc-input.jsx-4406bd1dc0acd5e1{width:100%;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;border:1px solid#ddd;padding:.5rem;margin-bottom:1rem;font-size:1rem;resize:vertical}.footer.jsx-4406bd1dc0acd5e1{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;gap:1rem}.add-btn.jsx-4406bd1dc0acd5e1{background:#222;color:#fff;border:none;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:.5rem 1.5rem;font-size:1rem;cursor:pointer;-webkit-transition:background.2s;-moz-transition:background.2s;-o-transition:background.2s;transition:background.2s}.add-btn.jsx-4406bd1dc0acd5e1:disabled{background:#888;cursor:not-allowed}.error.jsx-4406bd1dc0acd5e1{color:#c00;font-size:.95rem;margin-left:1rem}"})]})})}}}]);